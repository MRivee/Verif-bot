<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Console Admin</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="admin-container">
        <h1>Console de Vérification</h1>
        <div class="controls">
            <button id="refreshBtn">Actualiser</button>
            <button id="clearBtn">Effacer</button>
        </div>
        <div class="log-container" id="logContainer">
            <!-- Logs apparaissent ici -->
        </div>
    </div>

    <script>
        const logContainer = document.getElementById('logContainer');
        
        async function loadLogs() {
            try {
                const response = await fetch('/.netlify/functions/verify?action=logs');
                const logs = await response.json();
                
                logContainer.innerHTML = logs.map(log => `
                    <div class="log-entry ${log.type}">
                        <span class="timestamp">[${new Date(log.timestamp).toLocaleString()}]</span>
                        <span class="message">${log.message}</span>
                    </div>
                `).join('');
            } catch (error) {
                logContainer.innerHTML += `
                    <div class="log-entry error">
                        Erreur de chargement: ${error.message}
                    </div>
                `;
            }
        }

        document.getElementById('refreshBtn').addEventListener('click', loadLogs);
        document.getElementById('clearBtn').addEventListener('click', () => {
            logContainer.innerHTML = '';
        });

        // Chargement initial et rafraîchissement toutes les 5s
        loadLogs();
        setInterval(loadLogs, 5000);
    </script>
</body>
</html>
